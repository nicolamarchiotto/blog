{% macro nav(website_title) %}
<nav id="header" class="w-screen h-full shadow-md flex justify-center">
  <!-- <div id="progress" class="top-0 bg-black max-w-8xl"></div> -->
  <div class="w-full px-4 bg-blue-800">
    <div class="max-w-8xl mx-auto container flex sm:flex-nowrap flex-wrap content-center h-full ">
      <div class="grow sm:grow-0 text-center flex items-center justify-center">
        {%set lang_base="" -%}
        {%if lang != config.default_language-%}
        {%set lang_base=lang%}
        {%endif-%}
        <a class="text-white text-3xl font-bold font-sans flex justify-center items-center hover:underline"
          href="{{config.base_url}}{{lang_base}}">
          {{ website_title }}
        </a>
      </div>

      <div
        class="w-full flex-grow sm:flex sm:items-center flex-wrap sm:flex-nowrap sm:w-auto mt-0 bg-transparent z-20 justify-center"
        id="nav-content">
        <ul class="list-reset flex flex-wrap sm:justify-end justify-center flex-1">

          
          {#Get the translations for this section if any-#}
          {% set translations = section.translations | default(value=page.translations|default(value=[])) -%}

          {%set langs = config.extra.language_codes | default(value=[]) -%}
          {%for trans_code in langs -%}
          {#Find if a translation exist for this section -#}
          {% set other_lang = translations | filter(attribute="lang", value=trans_code) | first -%}

          {#
          Now the objective of this if/elif/if is to ensure that we have a link to other languages at the end of the
          navbar
          We perform the following checks in this order:
          1) Put a link to the direct translation of the page if exist
          2) else Put a link to the home page of the language
          3) Put a link to the home page of the language
          -#}
          {% if other_lang and other_lang.lang != lang -%}
          <li class="flex items-center ">
            <a href="{{other_lang.permalink}}"
              class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline px-4 align-middle ">
              <div class="align-middle border-[1px] border-transparent hover:border-blue-200">
                {% if other_lang and lang == 'en' -%}

                <svg version="1.1" id="Layer_1" class="w-8 shadow-lg "  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55.2 38.4"
                  style="enable-background:new 0 0 55.2 38.4" xml:space="preserve">
                  <style type="text/css">
                    .st0 {
                      fill: #FEFEFE;
                    }

                    .st1 {
                      fill: #C8102E;
                    }

                    .st2 {
                      fill: #012169;
                    }
                  </style>
                  <g>
                    <path class="st0"
                      d="M2.87,38.4h49.46c1.59-0.09,2.87-1.42,2.87-3.03V3.03c0-1.66-1.35-3.02-3.01-3.03H3.01 C1.35,0.01,0,1.37,0,3.03v32.33C0,36.98,1.28,38.31,2.87,38.4L2.87,38.4z" />
                    <polygon class="st1"
                      points="23.74,23.03 23.74,38.4 31.42,38.4 31.42,23.03 55.2,23.03 55.2,15.35 31.42,15.35 31.42,0 23.74,0 23.74,15.35 0,15.35 0,23.03 23.74,23.03" />
                    <path class="st2" d="M33.98,12.43V0h18.23c1.26,0.02,2.34,0.81,2.78,1.92L33.98,12.43L33.98,12.43z" />
                    <path class="st2"
                      d="M33.98,25.97V38.4h18.35c1.21-0.07,2.23-0.85,2.66-1.92L33.98,25.97L33.98,25.97z" />
                    <path class="st2"
                      d="M21.18,25.97V38.4H2.87c-1.21-0.07-2.24-0.85-2.66-1.94L21.18,25.97L21.18,25.97z" />
                    <path class="st2" d="M21.18,12.43V0H2.99C1.73,0.02,0.64,0.82,0.21,1.94L21.18,12.43L21.18,12.43z" />
                    <polygon class="st2" points="0,12.8 7.65,12.8 0,8.97 0,12.8" />
                    <polygon class="st2" points="55.2,12.8 47.51,12.8 55.2,8.95 55.2,12.8" />
                    <polygon class="st2" points="55.2,25.6 47.51,25.6 55.2,29.45 55.2,25.6" />
                    <polygon class="st2" points="0,25.6 7.65,25.6 0,29.43 0,25.6" />
                    <polygon class="st1" points="55.2,3.25 36.15,12.8 40.41,12.8 55.2,5.4 55.2,3.25" />
                    <polygon class="st1" points="19.01,25.6 14.75,25.6 0,32.98 0,35.13 19.05,25.6 19.01,25.6" />
                    <polygon class="st1" points="10.52,12.81 14.78,12.81 0,5.41 0,7.55 10.52,12.81" />
                    <polygon class="st1" points="44.63,25.59 40.37,25.59 55.2,33.02 55.2,30.88 44.63,25.59" />
                  </g>
                </svg>
                {% elif other_lang and lang == 'it' -%}
                <svg xmlns="http://www.w3.org/2000/svg" class="w-8 shadow-lg" shape-rendering="geometricPrecision"
                  text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd"
                  clip-rule="evenodd" viewBox="0 0 90.77 63.15">
                  <g fill-rule="nonzero">
                    <path fill="#009246"
                      d="M29.47 0v63.15H4.99C2.24 63.15 0 60.9 0 58.16V4.99C0 2.24 2.24 0 4.99 0h24.48z" />
                    <path fill="#fff" d="M61.31 0v63.15H29.47V0z" />
                    <path fill="#CE2B37"
                      d="M61.31 63.15V0h24.48c2.74 0 4.98 2.24 4.98 4.99v53.17c0 2.74-2.24 4.99-4.98 4.99H61.31z" />
                  </g>
                </svg>
                {%endif-%}
              </div>
            </a>
          </li>
          {%endif-%}
          {% endfor -%}


          {# Get the upper section -#}
          {% set dot_lang = macros::dot_lang() -%}
          <!-- {% set index_section = get_section(path="_index"~dot_lang~".md", metadata_only=true) -%} -->
          {% set index_section = get_section(path="_index.md", metadata_only=true) -%}
          {% for ssection in index_section.subsections -%}
          {% set ssection_data = get_section(path=ssection, metadata_only=true) -%}
          <!-- {% if not ssection_data.extra.hidden_nav -%} -->
          <li class="text-lg">
            <a href="{{ get_url(path=ssection_data.path, trailing_slash=false) }}" class={%if current_path and
              current_path is starting_with(ssection_data.path) %}"inline-block py-2 px-4 text-white font-bold
              "{% else %}"inline-block text-blue-200 font-bold
              py-2 px-4 hover:underline"{%endif%}>
              {{ssection_data.title}}
            </a>
          </li>
          <!-- {% endif -%} -->
          {% endfor -%}

          {% if lang == config.default_language -%}
          {% set menu_items = config.extra.menu_items -%}
          {% else -%}
          {% set menu_items = config.extra[lang].menu_items -%}
          {% endif -%}


          {% for item in menu_items -%}
          <li class="text-lg">
            <a href={{ get_url(path=item.path, trailing_slash=false, lang=lang) }} class={%if current_path and
              current_path in ['/','/it/'] %}"inline-block py-2 px-4 text-white font-bold no-underline"{% else %}"inline-block
              text-blue-200 font-bold py-2 px-4 hover:underline"{%endif%}>
              {{item.name}}
            </a>
          </li>
          {% endfor -%}
          
          
        </ul>
      </div>
    </div>
  </div>
</nav>
{% endmacro %}